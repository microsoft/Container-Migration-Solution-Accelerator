# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-dev/main/schemas/v1.0/azure.yaml.json

name: container-migration-solution-accelerator
metadata:
    template: container-migration-solution-accelerator@1.0

requiredVersions:
  azd: '>=1.18.2'

hooks:
  postdeploy:
    posix:
      shell: sh
      run: |  
        echo "üß≠ Web App Details:"
        echo "‚úÖ Name: $CONTAINER_WEB_APP_NAME"
        echo "üåê Endpoint: https://$CONTAINER_WEB_APP_FQDN"
        echo "üîó Portal URL: https://portal.azure.com/#resource/subscriptions/$AZURE_SUBSCRIPTION_ID/resourceGroups/$AZURE_RESOURCE_GROUP/providers/Microsoft.App/containerApps/$CONTAINER_WEB_APP_NAME"

        echo "üß≠ API App Details:"
        echo "‚úÖ Name: $CONTAINER_API_APP_NAME"
        echo "üåê Endpoint: https://$CONTAINER_API_APP_FQDN"
        echo "üîó Portal URL: https://portal.azure.com/#resource/subscriptions/$AZURE_SUBSCRIPTION_ID/resourceGroups/$AZURE_RESOURCE_GROUP/providers/Microsoft.App/containerApps/$CONTAINER_API_APP_NAME"
      interactive: true
    windows:
      shell: pwsh
      run: |  
        Write-Host "üß≠ Web App Details:"
        Write-Host "‚úÖ Name: $env:CONTAINER_WEB_APP_NAME"
        Write-Host "üåê Endpoint: https://$env:CONTAINER_WEB_APP_FQDN"
        Write-Host "üîó Portal URL: https://portal.azure.com/#resource/subscriptions/$env:AZURE_SUBSCRIPTION_ID/resourceGroups/$env:AZURE_RESOURCE_GROUP/providers/Microsoft.App/containerApps/$env:CONTAINER_WEB_APP_NAME" -ForegroundColor Cyan
        
        Write-Host "üß≠ API App Details:"
        Write-Host "‚úÖ Name: $env:CONTAINER_API_APP_NAME"
        Write-Host "üåê Endpoint: https://$env:CONTAINER_API_APP_FQDN"
        Write-Host "üîó Portal URL: https://portal.azure.com/#resource/subscriptions/$env:AZURE_SUBSCRIPTION_ID/resourceGroups/$env:AZURE_RESOURCE_GROUP/providers/Microsoft.App/containerApps/$env:CONTAINER_API_APP_NAME" -ForegroundColor Cyan
      interactive: true
